angular.module("starter.controllers",[]).controller("CalculateCtrl",["$scope","globalServices","calculateServices","$stateParams",function(e,l,t,r){e.default={isAdditional:!1,lotteryName:"",lotteryIssue:"",lotteryCode:r.lotteryCode,bonusNumber:[]},e.$on("$ionicView.enter",function(){e.isShowShare=!!window.device}),e.$on("$ionicView.leave",function(){e.popover&&e.popover.hide()}),e.$on("picker",function(l,r){e.cleanBall(),e.default.bonusNumber=t.lotteryNumberHandle(r)}),e.redBall={number:[],ballLen:"001"==r.lotteryCode?33:35,minSize:"001"==r.lotteryCode?6:5},e.blueBall={number:[],ballLen:"001"==r.lotteryCode?16:12,minSize:"001"==r.lotteryCode?1:2},e.cleanBall=function(){e.$broadcast("cleanBall")},t.getLastIssue(e),e.calculateHandle=function(){var r,n=!1;e.redBall.number.length<e.redBall.minSize?l.errorPrompt("红球最少选择"+e.redBall.minSize):e.blueBall.number.length<e.blueBall.minSize?l.errorPrompt("蓝球最少选择"+e.blueBall.minSize):((e.redBall.number.length>e.redBall.minSize||e.blueBall.number.length>e.blueBall.minSize)&&(n=!0),r=unit.sortNumber(e.redBall.number).join(",")+"#"+unit.sortNumber(e.blueBall.number).join(","),t.calculateHandle({lotteryCode:e.default.lotteryCode,issue:unit.getPattren(e.default.lotteryIssue,/(\d+)/),pollCode:n?"02":"01",playCode:e.default.isAdditional?"02":"01",number:r},e))}}]);