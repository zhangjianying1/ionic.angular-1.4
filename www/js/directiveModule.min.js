var directiveModule=angular.module("starter.directives",[]).directive("setHeight",function(){"use strict";return{restrict:"AE",link:function(e,t,n){t.css("height",document.documentElement.clientHeight-t[0].getBoundingClientRect().top-44+"px")}}}).directive("checkBox",function(){return{restrict:"AE",replace:!0,scope:{name:"@",value:"="},template:' <div class="checkbox-btn" on-tap="toggleHandle()"><i class="icon icon-arc" ng-class="{\'icon-selected\': value}"></i>{{name}}</div>',link:function(e,t,n){e.toggleHandle=function(){e.value=!e.value}}}}).directive("deleteBtn",function(){return{restrict:"AE",replace:!0,template:'<div class="delete-btn" on-tap="toggleHandle()"><i class="icon icon-delete"></i>{{name}}</div>',link:function(e,t,n){e.name=n.name,e.toggleHandle=function(){setTimeout(function(){e.$apply(n.deleteHandle)},0)}}}}).directive("setTimeOutLoadImg",["$ionicScrollDelegate",function(e){return{restrict:"AE",replace:!0,transclude:!0,template:'<ion-content  overflow-scroll="false" has-bouncing="true" delegate-handle="oScroll" on-scroll="scrollHandle()" ><div ng-transclude=""></div> </ion-content>',link:function(t,n,i){function l(){c=n.find("img"),angular.forEach(c,function(e){s=e.getAttribute("_src"),e.getBoundingClientRect().top<r&&s&&(u=new Image,u.onload=a(e,s),u.src=s)})}function a(e,t){e.src=t,e.removeAttribute("_src"),e.style.opacity=1}var c,s,o=e.$getByHandle("oScroll"),r=document.documentElement.clientHeight,d=null,u=null,p=!0;t.$on("loadImg",function(){l()}),setTimeout(l,200),t.scrollHandle=function(){p&&(p=!1,setTimeout(function(){d=o.getScrollPosition(),l(),t.$emit("scrolling",d),p=!0},300))}}}}]).directive("repeatFinish",function(){return{link:function(e,t,n){1==e.$last&&setTimeout(function(){e.$eval(n.repeatFinish)},1e3)}}}).directive("share",["$ionicPopup",function(e){return{restrict:"AE",scope:{value:"@",title:"@",direction:"@",url:"@",thumb:"@"},transclude:!0,template:'<div on-tap="share(value)"  ng-transclude></div>',link:function(t,n,i){var l=!0;t.share=function(n){if(l){l=!1;e.show({template:'<div style="padding: 30px">是否要打开微信?</div>',title:"提示",scope:t,buttons:[{text:"取消",onTap:function(){l=!0}},{text:"确定",type:"c-red",onTap:function(e){window.Wechat&&Wechat.share({message:{title:t.title,description:t.direction,thumb:"http://h5.icaimi.com/img/calculate/win.png",media:{type:Wechat.Type.LINK,webpageUrl:t.url}},scene:n},function(){l=!0},function(e){l=!0}),e.preventDefault()}}]})}}}}}]).directive("pickerBall",[function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{value:"="},template:'<div ng-transclude><em  on-tap="selectBall(ball.value)" ng-repeat="ball in ballNumber track by $index" ng-class="{active: ball.active}">{{ball.value}}</em></div>',link:function(e,t,n){function i(e){return e+="",e.length<2?"0"+e:e}for(var l=e.value.ballLen,a=[];l--;)a.push({active:!1,value:i(e.value.ballLen-l)});e.ballNumber=a,e.selectBall=function(t){angular.forEach(a,function(n,i){n.value==t&&(n.active=!n.active,n.active?e.value.number.push(t):e.value.number.splice(e.value.number.indexOf(t),1))})},e.$on("cleanBall",function(){angular.forEach(a,function(e,t){e.active=!1}),e.value.number=[]})}}}]).directive("selectVal",[function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{value:"=",datas:"="},template:'<div class="select"><span class="select-val" on-tap="toggleShow()">{{value}}</span><ul class="datalist"><li on-tap="selectHandle(data.value)" ng-repeat="data in datas" class="option" ng-class="{active: data.active}"><span>{{data.value}}</span></li></ul></div>',link:function(e,t,n){function i(t){var n=t;angular.forEach(e.datas,function(e){e.value==t?(e.active=!0,n=e.value):e.active=!1}),e.value=n,e.$emit("picker",n)}function l(){var n;a=t.find("ul")[0],e.bBtn=!e.bBtn,e.bBtn?(n=0,t[0].style.overflow="visible"):(n=-200,t[0].style.overflow="hidden"),a.style.transform="translate3d(0,"+n+"%, 0)",a.style.webkitTransform="translate3d(0,"+n+"%, 0)"}var a=t.find("ul")[0];e.bBtn=!1,i(e.value),e.selectHandle=function(e){i(e),l()},e.toggleShow=function(){l()}}}}]);directiveModule.directive("dorpDown",function(){return{restrict:"AE",transclude:!0,replace:!0,require:"^slideTabs",template:'<div class="dorp-down" set-height><div class="up-load"><span class="{loading: isload}"></span></div><div class="dorpcont" ><ion-scroll set-height overflow-scroll="true"><div ng-transclude ></div></ion-scroll></div>{{t}}</div>',link:function(e,t,n,i){function l(){o.deltaY=o.deltaY>o.scrollH?o.deltaY/(o.deltaY/window.innerHeight+1):o.deltaY,o.deltaY>o.scrollCritical?o.pull.style.webkitTransform="rotate(0deg)":o.pull.style.webkitTransform="rotate(180deg)",o.element.style.transform="translate3d(0, "+o.deltaY+"px , 0)",o.element.style.webkitTransform="translate3d(0, "+o.deltaY+"px , 0)"}function a(){o.deltaY>o.scrollCritical?(c(68),setTimeout(function(){e.$apply(n.fn)},1e3)):c(0)}function c(e,t){switch(t||(t=o.speed),e){case 0:setTimeout(function(){o.bBtn=!1,o.pull.className="",o.deltaY=0,o.element.removeEventListener("touchmove",s,!1),o.element.style.transform="none",o.element.style.webkitTransform="none"},100);break;case 68:o.pull.className="loading",o.element.addEventListener("touchmove",s,!1)}o.element.style.webkitTransitionDuration=t+"ms",o.element.style.webkitTransform="translate3d(0, "+e+"px , 0)"}function s(e){e.preventDefault()}e.$on("refreshComplete",function(){c(0)});var o={element:t[0],pull:t.find("div").eq(0).find("span")[0],scrollH:80,scrollCritical:68,speed:300,deltaY:0,start:0,bBtn:!1};o.element.addEventListener("touchstart",function(e){o.start=e.touches&&e.touches[0].pageY,o.startX=e.touches&&e.touches[0].pageX,o.element.style.webkitTransitionDuration="0ms",scrollT=t.find("ion-scroll")[0].scrollTop,scrollT<2&&(document.body.scrollTop||document.documentElement.scrollTop)<2&&(o.bBtn=!0)}),o.element.addEventListener("touchmove",function(t){if(e.t=i.stopOtherScroll,!i.stopOtherScroll&&o.bBtn&&(document.body.scrollTop||document.documentElement.scrollTop)<2){if(o.deltaY=t.touches&&t.touches[0].pageY-o.start,Math.abs(o.deltaY)<Math.abs(t.touches[0].pageX-o.startX))return o.bBtn=!1,void t.preventDefault();o.bBtn=!0,o.deltaY>0&&(l(),t.preventDefault())}}),o.element.addEventListener("touchend",function(){o.deltaY>0&&o.bBtn&&a()})}}}),directiveModule.directive("myInput",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{value:"=",easyStyle:"@"},template:'<div style="-webkit-box-flex: 1; -webkit-flex: 1; flex:1; display: -webkit-box; -webkit-box-align: center"><div ng-transclude style="box-flex: 1; -webkit-box-flex:1"></div><i ng-if="value" ng-class="{\'ion-close-round\': easyStyle, \'icon-clean\': !easyStyle}" ng-click="cleanHandler()"></i></div>',link:function(e,t,n){e.cleanHandler=function(){e.value=""}}}}).directive("number",function(){return{restrict:"AE",require:"^ngModel",link:function(e,t,n,i){var l;t.bind("input",function(e){l=this.value,isNaN(l)&&(l=l.slice(0,-1),this.value=l),i.$setViewValue(l)})}}}),directiveModule.directive("passWord",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{placeholder:"@",error:"@",validate:"=",password:"="},template:'<div class="item item-input password-input" style="position: relative; overflow: visible"><em ng-transclude is-hide ></em><input checkpassword ng-model="password"  type="password" placeholder={{placeholder}} required /><i  ng-class="{iconshoweye: bBtn , iconlockeye: !bBtn}" ng-click="toggleEye()"></i><div ng-if="isShow" class="password-error" >{{error}}</div></div></div>',link:function(e,t,n){e.bBtn=!1,e.toggleEye=function(n){var i=t.find("input")[0];e.bBtn?i.setAttribute("type","password"):i.setAttribute("type","text"),e.bBtn=!e.bBtn},e.$watch("validate",function(t,n){t==e.password&&(e.isShow=!1)})}}}).directive("checkpassword",function(){var e=/^.{6,16}$/;return{link:function(t,n,i){function l(i){var l=n[0].value;t.validate&&t.validate!=l?t.isShow=!0:e.test(n[0].value)?t.isShow=!1:t.isShow=!0,t.$apply()}t.isShow=!1,t.error&&(n[0].onfocus=function(){t.isShow=!1},n.bind("change",l),n.bind("blue",l))}}}).directive("isHide",function(){return{restrict:"AE",link:function(e,t,n){var i=t[0].innerHTML;i||t.remove()}}}),directiveModule.directive("tab",function(){return{restrict:"AE",transclude:!0,replace:!0,require:"^?tabs",scope:{title:"@"},template:"<div ><div ng-transclude style=\"display:{{active ? 'block' : 'none'}}\"></div></div>",link:function(e,t,n,i){e.width=document.documentElement.clientWidth,i.setPanels(e)}}}).directive("tabs",["$ionicScrollDelegate",function(e){var t=document.documentElement.clientWidth;return{restrict:"AE",transclude:!0,replace:!0,scope:{index:"=",isHeaderBor:"@",isScroll:"@"},controller:["$scope",function(e){e.panels=[],e.childrenLen=0,this.setPanels=function(n){0==e.panels.length?n.active=!0:n.active=!1,e.childrenLen+=1,e.panels.push(n),e.width=e.childrenLen*t+"px"},this.index=e.index||0}],template:'<div class="slide-tabs"><div class="tab-header-wrap"><ion-scroll delegate-handle="nav" style="width:100%" direction="x"  scrollbar-x="false" style="height: 34px" ><div class="slide-tab-header" ><div class="tab-header-box"  ng-class="{active: panel.active }" on-tap="selectHandle($event, $index, panel)" ng-repeat="panel in panels" ><div class="tab-header-style" ng-class="{\'show-bor\': isHeaderBor}"><span>{{panel.title}}</span></div></div></div></ion-scroll></div><div class="slide-tab-cont"  ng-transclude ></div></div>',link:function(t,n,i,l){function a(e,t){for(var n=e;1==n.nodeType&&!n.classList.contains(t);)n=n.parentNode;return n}function c(e){var t=(e.getBoundingClientRect(),e.offsetWidth),n=e.offsetLeft,i=s-n+t;n<o/2?r.scrollTo(0,0,!0):i<o/2?r.scrollTo(s-i,0,!0):r.scrollTo(Math.abs(n-o/2+t/2),0,!0)}var s,o=document.documentElement.clientWidth,r=e.$getByHandle("nav"),d=null;t.selectHandle=function(e,n,i){angular.forEach(t.panels,function(e){e.active=!1}),i.active=!0,setTimeout(function(){t.$apply(function(){t.index=n})},0),d=a(e.target,"tab-header-box"),s=d.offsetWidth*t.panels.length,c(d)}}}}]).directive("slideTab",function(){return{restrict:"AE",transclude:!0,replace:!0,require:["^?slideTabs"],scope:{title:"@"},template:'<div class="slide-tab" style="width: {{width}}px" > <div ng-transclude ></div></div>',link:function(e,t,n,i){i=i[0],e.width=document.documentElement.clientWidth,i.setPanels(e)}}}).directive("slideTabs",function(){var e=document.documentElement.clientWidth;return{restrict:"AE",transclude:!0,replace:!0,scope:{index:"=",isHeaderBor:"@"},controller:["$scope",function(t){t.panels=[],t.childrenLen=0,this.stopOtherScroll=!1,this.setPanels=function(n){t.childrenLen+=1,t.panels.push(n),t.width=t.childrenLen*e+"px"},this.index=t.index||0}],template:'<div class="slide-tabs"><div class="tab-header-wrap"><ion-scroll id="scroll-header" style="width:100%" direction="x"  scrollbar-x="false" style="height: 34px"><div class="slide-tab-header" ><div class="tab-header-box"  ng-class="{active: $index == index}" on-tap="selectHandle($index)" ng-repeat="panel in panels" ><div class="tab-header-style" ng-class="{\'show-bor\': isHeaderBor}"><span>{{panel.title}}</span></div></div></div></ion-scroll></div><div class="slide-tab-cont"  ><div class="slide-tab-one" ng-transclude style="width: {{width}}"></div></ion-scroll></div></div>',link:function(t,n,i,l){var a=n[0].querySelector(".slide-tab-one"),c=1,s=t.index,o=!0,r=null;t.selectHandle=function(n){void 0!=n&&(s=n,t.index=n,setTimeout(function(){t.$apply()},0)),a.style.webkitTransitionDuration="300ms",a.style.transitionDuration="300ms",a.style.webkitTransform="translate3d("+-s*e+"px, 0, 0)",a.style.transform="translate3d("+-s*e+"px, 0, 0)"},a.addEventListener("touchstart",function(e){o=!0,r={touchTime:(new Date).getTime(),touchX:e.touches[0].pageX,touchY:e.touches[0].pageY,touchDistance:0,countDistance:-1},l.stopOtherScroll=void 0}),a.addEventListener("touchmove",function(n){if(1==n.touches.length){if(l.stopOtherScroll===!1)return void n.preventDefault();if(a.style.transitionDuration="0ms",a.style.webkitTransitionDuration="0ms",r.touchDistance=n.touches[0].pageX-r.touchX,Math.abs(r.touchDistance)<Math.abs(n.touches[0].pageY-r.touchY)?(void 0==l.stopOtherScroll&&(l.stopOtherScroll=!1),o=!1):(o=!0,void 0==l.stopOtherScroll&&(l.stopOtherScroll=!0)),r.touchDistance>0&&0==s||r.touchDistance<0&&s==t.childrenLen-1)return void(o=!1);r.touchDistance=r.touchDistance*c,r.countDistance=-s*e+r.touchDistance,a.style.webkitTransform="translateX("+r.countDistance+"px)",a.style.transform="translateX("+r.countDistance+"px)"}}),a.addEventListener("touchend",function(n){r.touchTime=(new Date).getTime()-r.touchTime,o&&(r.touchTime<250||Math.abs(r.touchDistance)>e/2)&&(o&&r.touchDistance<0?s+=1:o&&r.touchDistance>0&&(s-=1)),t.selectHandle(s),l.stopOtherScroll=void 0})}}}),directiveModule.directive("togglePanel",function(){return{restrict:"AE",replace:!0,transclude:!0,template:"<div ng-transclude></div>",controller:["$scope",function(e){var t=e.panels=[];this.pushPanel=function(e){e.active=!1,t.push(e)},this.showHandle=function(e){return 1==e.active?void(e.active=!1):void angular.forEach(t,function(t){t.active=!1,e.active=!0})}}]}}).directive("panel",function(){return{restrict:"AE",replace:!0,transclude:!0,require:"^?togglePanel",template:'<div ng-transclude ng-click="showHandle()" ng-class="{\'active-show\': active}"></div>',link:function(e,t,n,i){i.pushPanel(e),e.showHandle=function(){i.showHandle(e)}}}}),directiveModule.directive("selectPicker",function(){return{restrict:"AE",replace:!0,transclude:!0,scope:{picker:"=",pickerVal:"="},template:'<div class="select-pick"><span class="ion-ios-arrow-back" ng-click="pickLeft()" ng-disabled="pickerVal==0"></span><em>{{picker[pickerVal]}}</em><span class="ion-ios-arrow-forward" ng-click="pickRight()"  ng-disabled="pickerVal==(picker.length-1)"></span></div>',link:function(e,t,n,i){e.pickerVal;e.pickLeft=function(){0!=e.pickerVal&&e.pickerVal--},e.pickRight=function(){e.pickerVal!=e.picker.length-1&&e.pickerVal++}}}});